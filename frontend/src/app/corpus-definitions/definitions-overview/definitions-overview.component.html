<div class="section">
    <div class="container">
        <nav aria-label="secondary navigation" class="breadcrumb block">
            <ul>
                <li><a [routerLink]="['/']">I-Analyzer</a></li>
                <li class="is-active" aria-current="page"><a>My corpora</a></li>
            </ul>
        </nav>

        <h1 class="title block">My corpora</h1>

        <p class="block">
            In this environment, you can create your own corpora. You can make a corpus
            for your own needs, or share it with others.
        </p>

        <div class="block">
            <a class="button" [routerLink]="['new']">
                <span class="icon" aria-hidden="true">
                    <fa-icon [icon]="actionIcons.add"></fa-icon>
                </span>
                <span>Create a new corpus</span>
            </a>
        </div>

        <div class="block" *ngIf="corpora$ | async as corpora">

            <table class="table is-fullwidth">
                <thead>
                    <tr>
                        <th>Corpus</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let corpus of corpora">
                        <td>{{corpus.definition.meta.title}}</td>
                        <td>
                            <a class="button"
                                [routerLink]="['/search', corpus.definition.name]"
                                [attr.disabled]="!corpus.active || null">
                                <span class="icon" aria-label="search">
                                    <fa-icon [icon]="actionIcons.search" />
                                </span>
                            </a>
                            &nbsp;
                            <a class="button" [routerLink]="['edit', corpus.id]">
                                <span class="icon" aria-label="edit">
                                    <fa-icon [icon]="actionIcons.edit"></fa-icon>
                                </span>
                            </a>
                            &nbsp;
                            <a class="button"
                                [routerLink]="['io', corpus.id]">
                                <span class="icon" aria-label="import-export">
                                    <fa-icon [icon]="actionIcons.inOut"></fa-icon>
                                </span>
                            </a>
                            &nbsp;
                            <button class="button" (click)="confirmDelete.open(corpus)"
                                [disabled]="corpus.active || null">
                                <span class="icon" aria-label="delete">
                                    <fa-icon [icon]="actionIcons.delete"></fa-icon>
                                </span>
                            </button>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>


<ia-confirm-modal #confirmDelete
    actionText="Delete corpus" actionButtonClass="is-danger" [icon]="actionIcons.delete"
    [handleAsync]="handleDelete" (accept)="onDeleteComplete()">
    <p>
        Do you want to delete corpus
         <strong>{{confirmDelete.data?.definition.meta.title}}</strong>?
        This cannot be reversed.
    </p>
</ia-confirm-modal>
