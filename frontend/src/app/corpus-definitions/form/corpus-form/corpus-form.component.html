<div class="section">
    <div class="container is-readable">
        <nav aria-label="secondary navigation" class="breadcrumb block">
            <ul>
                <li><a [routerLink]="['/']">I-Analyzer</a></li>
                <li><a [routerLink]="['../..']">Custom corpora</a></li>
                <li class="is-active" aria-current="page"><a>{{(corpus$ | async).definition?.meta.title ||
                        '...'}}: edit</a></li>
            </ul>
        </nav>

        <div class="columns">
            @let corpus = corpus$ | async;
            <div class="column">
                <h1 class="title">Edit "{{corpus?.definition?.meta?.title || '...'}}"</h1>
            </div>
            <div class="column is-narrow">
                @if (corpus.active) {
                    <a class="button is-medium" [routerLink]="['/search', corpus.definition.name]">
                        <span class="icon">
                            <fa-icon [icon]="corpusIcons.search" aria-hidden="true" />
                        </span>
                    </a>
                }
            </div>
        </div>

    </div>
</div>

<div class="section">
    <div class="container">
        <p-steps [model]="steps$ | async" [readonly]="false" [activeIndex]="activeStep$ | async"
            (activeIndexChange)="onActiveIndexChange($event)" />
    </div>
</div>
<ng-container [ngSwitch]="activeStep$ | async">
    <div class="section">
        <div class="container is-readable" *ngIf="corpus$ | async as corpus">
            <ng-container *ngSwitchCase="0"><ia-meta-form
                    [corpus]="corpus" /></ng-container>
            <ia-data-form *ngSwitchCase="1" />
            <ng-container *ngSwitchCase="2">
                <ia-field-form [corpus]="corpus" />
            </ng-container>
            <p *ngSwitchCase="3">
                <ia-index-form [corpus]="corpus" />
            </p>
        </div>
    </div>
</ng-container>

<div class="section" *ngIf="nextStep$ | async as nextStep">
    <div class="container is-readable">
        <button class="button" (click)="toNext()" [disabled]="nextStep.disabled">
            <span class="icon"><fa-icon [icon]="actionIcons.next" aria-hidden="true" /></span>
            <span>{{nextStep.label}}</span>
        </button>
    </div>
</div>
