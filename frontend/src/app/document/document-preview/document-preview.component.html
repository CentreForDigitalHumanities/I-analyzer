<ng-container *ngIf="page && document">
    <table class="table is-fullwidth">
        <ng-container *ngFor="let field of page.fields">
            <tr *ngIf="document.fieldValue(field)">
                <th [iaBalloon]="field.description" iaBalloonPosition="left" iaBalloonLength="medium">
                    {{field.displayName}}:
                </th>
                <ng-container *ngIf="document.highlight && document.highlight[field.name]; else unhighlightedRow">
                    <td>
                        <ng-container *ngFor="let highlight of document.highlight[field.name]">
                            <div ngPreserveWhitespaces style="word-break:break-word" [innerHtml]="highlight"></div>
                            <hr *ngIf="highlight !== document.highlight[field.name][document.highlight[field.name].length-1]">
                        </ng-container>
                    </td>
                </ng-container>
                <ng-template #unhighlightedRow>
                    <td style="word-break:break-word" [innerHtml]="document.fieldValue(field) | highlight:query:true"></td>
                </ng-template>
            </tr>
        </ng-container>
    </table>


    <div class="columns is-vcentered">
        <div class="column is-narrow">
            <ng-container *ngIf="document.relevance">
                <div class="relevance-score heading">
                    <span>Relevance: {{document.relevance * 100 | number:'1.0-0' }}%</span>
                </div>
            </ng-container>
        </div>
        <div class="column" role="presentation"></div>
        <div class="column field is-grouped is-narrow">
            <div class="control">
                <button class="button is-primary" (click)="page.focus(document)">
                    <span class="icon" aria-hidden="true"><fa-icon [icon]="actionIcons.view"></fa-icon></span>
                    <span>
                        View
                    </span>
                </button>
            </div>
            <div class="control" *ngIf="document.fieldValues.image_path">
                <button class="button" (click)="goToScan(page, document, $event)" aria-label="view scan">
                    <span class="icon" aria-hidden="true"><fa-icon [icon]="documentIcons.scanAlt"></fa-icon></span>
                    <span>View scan</span>
                </button>
            </div>
            <div class="control">
                <a class="button" [routerLink]="documentUrl">
                    <span class="icon" aria-hidden="true"><fa-icon [icon]="actionIcons.link"></fa-icon></span>
                    <span>
                        Link
                    </span>
                </a>
            </div>
        </div>
    </div>
</ng-container>
