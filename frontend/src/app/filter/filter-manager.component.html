<div>
    <div class="field has-addons">
        <div class="control is-expanded">
            <h4 class="title">Filters</h4>
        </div>
        <p class="control" style="float:right">
            <span *ngIf="activeFilters.length > 0" class="button icon filter-icon is-primary is-active is-medium is-round"
                (click)="resetAllFilters()" iaBalloon="Reset all filters to their default values"
                iaBalloonPosition="down-left">
                <i class="fa fa-trash"></i>
            </span>
            <span *ngIf="activeFilters.length > 0" class="button icon filter-icon is-inverted is-round"
                [ngClass]="{'is-primary is-medium': searchFilters.length > 0}" (click)="toggleActiveFilters()"
                iaBalloon="{{(searchFilters.length > 0) ? ('Disable active filters') : ('Enable deactivated filters')}}"
                iaBalloonPosition="down-left">
                <i class="fa fa-filter"></i>
            </span>
        </p>
    </div>
    <ng-container *ngFor="let field of corpus.fields">
        <div class="box filter-container" *ngIf="field.searchFilter" [ngClass]="{'on': field.searchFilter.useAsFilter}">
            <div class="field has-addons">
                <div class="control is-expanded" iaBalloon="{{ field.searchFilter.description }}"
                    iaBalloonPosition="up-left" iaBalloonLength="fit">
                    <label class="label" [for]="'filter' + field.name">{{ field.displayName
                        }}</label>
                </div>
                <p class="control">
                    <button *ngIf="field.searchFilter.useAsFilter" class="button icon filter-icon is-primary is-inverted is-round"
                        (click)="resetFilter(field.searchFilter)" iaBalloon="Reset this filter to its default values"
                        iaBalloonPosition="down-left">
                        <i class="fa fa-trash"></i>
                    </button>
                    <button class="button icon filter-icon is-primary is-inverted is-round" [ngClass]="{'is-primary': field.searchFilter.useAsFilter}"
                        (click)="toggleFilter(field.searchFilter)" iaBalloon="{{field.searchFilter.useAsFilter ? 'Disable this filter' : 'Enable this filter'}}"
                        iaBalloonPosition="down-left">
                        <i class="fa fa-filter"></i>
                    </button>
                </p>
            </div>
            <ng-container [ngSwitch]="field.searchFilter.defaultData.filterType">
                <ia-boolean-filter *ngSwitchCase="'BooleanFilter'" [filter]="field.searchFilter" [grayedOut]="grayOutFilters" (update)="updateFilterData($event)"></ia-boolean-filter>
                <ia-date-filter *ngSwitchCase="'DateFilter'" [filter]="field.searchFilter" [grayedOut]="grayOutFilters" (update)="updateFilterData($event)"></ia-date-filter>
                <ia-multiple-choice-filter *ngSwitchCase="'MultipleChoiceFilter'" [filter]="field.searchFilter" [grayedOut]="grayOutFilters" [optionsAndCounts]="multipleChoiceData[field.name]" (update)="updateFilterData($event)"></ia-multiple-choice-filter>
                <ia-range-filter *ngSwitchCase="'RangeFilter'" [filter]="field.searchFilter" [grayedOut]="grayOutFilters" (update)="updateFilterData($event)"></ia-range-filter>
            </ng-container>
        </div>
    </ng-container>
</div>
